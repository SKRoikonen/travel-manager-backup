<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <title>Trip chat</title>

</head>
<body>
  <div class="container" style=" height:83vh; width:600px; padding-bottom:12px; background-color: rgb(94, 155, 255)">
    <div class="row">
        <div class="col -md-7 col-sm-12" >
            <div id="chat">
                <br>
                <div class="card">
                  <div id="messages" class="card-block" style="overflow-y: scroll; height:55vh">
                    <div style= "text-indent:-15px; padding-left: 15px; font-size: 16px" *ngFor="let message of messages">
                        [{{message.timestamp}}] <b>{{message.sender}}:</b> {{message.content}}
                    </div>

                  </div>
                </div>
                <br>
                <form #f="ngForm" (ngSubmit)="postMessage(); scrollChat()">

                <input name = "msg" #msg = "ngModel" type = "text" style="font-size: 16px" required [(ngModel)]="message.content" id="textarea" class="form-control"
                placeholder="Enter message..."/>
                <br>
                <button style="font-size:16px" class="btn btn-success" >Post</button>
              </form>
                </div>

            </div>
        </div>
    </div>


  <!-- <script>
    src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"
  </script>
  <script>
      (function(){
          var element = function(id){
              return document.getElementById(id);
          }

          //Get Elements
          var status = element('status');
          var messages = element('messages');
          var textarea = element('textarea');
          var username = element('username');

          //Set default status
          var statusDefault = status.textContent;

          var setStatus = function(s){
            // Set status
            status.textContent = s;

            if(s !== statusDefault){
              var delay = setTimeout(function(){
                setStatus(statusDefault);
              }, 4000);
            }
          }

          // connect to socket.io
          var socket = io.connect('mongodb://sakari:m1ukumauku@ds213645.mlab.com:13645/t7rosa00')

          // Check for connection
          if(socket !== undefined){
            console.log('Connected to socket...');

            socket.on('output', function(data){
            console.log(data);
          });
          }

      })();
  </script> -->
</body>
</html>
